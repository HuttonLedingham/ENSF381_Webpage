<!DOCTYPE html>
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<!-- Add meta tags, title, and link to styles.css here -->
    <title>E-Shope</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <meta name = "keywords" content =" HTML, Web Development, E-Commerce Site">
    <meta name = "author" content ="Isaac Jacob & Hutton Ledingham" >
    <link rel = "shortcut icon" href = "images/logo.ico" type =" image/x-icon">

    <script>
			document.addEventListener('DOMContentLoaded', function afterRender() {
                var buttonElement = document.querySelector("button[type=button]");
					buttonElement.addEventListener('click', 
					function(){
                        checkPasswordAndUsername();
					})
            });
            async function checkPasswordAndUsername(){
                var loginOutput = document.getElementsByClassName("login-output");
                loginOutput[0].style.display = 'block';

                const file = await fetch("https://jsonplaceholder.typicode.com/users");
                const users = await file.json();
                const password = document.querySelector("input[type = password]").value;
                const username = document.querySelector("input[type = username]").value;
                var foundUser = false;

                users.forEach(user =>{
                    if(username === user.username && password === user.email){
                        foundUser = true;
                    }

                })

                loginOutput[0].removeChild(loginOutput[0].children[0]);

                const para = document.createElement("p");
                var node;
                if(foundUser){
					node = document.createTextNode("Login Succesful!");
                }
                else{
                    node = document.createTextNode("Invalid username or password. Please try again.");
                }
                para.appendChild(node);

                loginOutput[0].appendChild(para)
            }
    </script>
</head>
<body>
    <header>
        <!-- Logo and website name go here -->
        <title>E-Shope</title>
        <img width="75 px" 
        src = "images/logo.png">
        <h1>E-Shope</h1>
    </header>
    <div> 
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="contact.html">Contact</a>
        <a href="login.html">Login</a>
        
    </div>
    <main>
        <section class="login-form">
            <form action="#" method="post">
                <label for="username", style="margin: 10px;">Username:</label>
                <br><input class="username" type="username" id="username" name="username" placeholder="Enter your username">

                <br><label for="Password" style="margin: 10px;">Password:</label>
                <br><input type="password" id="Password" name="Password" placeholder="Enter your password"> 

                <button type ="button" class="login">Login</button>    
                <p class="sign">Dont have an account?  <a href="signup.html" class="signup">Sign Up here</a></p>
            </form>
        </section>
    </main>
    <div class = "login-output">
        <p></p>
    </div>
    <footer>
        <!-- Copyright notice goes here -->
        <p>Copy right E-Shope @2024</p>
        
    </footer>
</body>
</html>

        
