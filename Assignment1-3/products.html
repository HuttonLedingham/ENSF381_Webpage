<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Shope</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
      document.addEventListener('DOMContentLoaded', function afterRender() {
                var productElements = document.getElementsByClassName("product");
                for(var i = 0; i < productElements.length; i++){
                    buttonElement = productElements[i].children[3];
                    buttonElement.addEventListener('click', 
					function(){
                        var productName = this.parentElement.children[1].textContent;
                        var price = this.parentElement.children[2].textContent;
                        addToCart(productName, price);
					})
                }
            });
        // Function to handle adding a product to the cart
        async function addToCart(productName, unitPrice) {
            // Check if the product is already in the cart
            var cartItem = document.getElementById(productName);
            if (cartItem) {
                // If yes, increase the quantity by 1
                var quantity = parseInt(cartItem.querySelector('.quantity').textContent);
                cartItem.querySelector('.quantity').textContent = quantity + 1;
                console.log(addToCart)
            } else {
                // If not, create a new cart item
                var cartSection = document.getElementsByClassName('product-list')[0];
                var newCartItem = document.createElement('div');
                newCartItem.id = productName;
                newCartItem.className = "cart-item";
                newCartItem.innerHTML = `
                    <p>${productName}</p>
                    <p class="unit-price"> \xa0\- ${unitPrice} -\xa0\ </p>
                    <p class="quantity">1</p>
                    <button class="remove-btn" onclick="removeFromCart('${productName}')">Remove</button>
                `;
                cartSection.appendChild(newCartItem);
            }
            // Show alert
            alert(productName + " has been added to the cart.");
        }

        // Function to handle removing a product from the cart
        function removeFromCart(productName) {
            var cartItem = document.getElementById(productName);
            var quantity = parseInt(cartItem.querySelector('.quantity').textContent);
            if (quantity > 1) {
                // If quantity > 1, decrease the quantity by 1
                cartItem.querySelector('.quantity').textContent = quantity - 1;
            } else {
                // If quantity = 1, remove the item from the cart
                cartItem.remove();
            }
        }
    </script>
</head>
<body>
    <header>
        <img src="images/logo.png" width="75px">
        <h1>E-Shope</h1>
    </header>
    <div> 
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="contact.html">Contact</a>
        <a href="login.html">Login</a>
    </div>
    <main>
        <section class="product-list">
            <!-- Product list -->
            <div class="product">
               <img  src="images/pencil.png" class="Productimage">
               <h1 class="productName">Pencil</h1>
               <p class="unitPrice">0.99$</p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img  src="images/sharpener.jpg" class="Productimage">
               <h1 class="productName">Sharpener</h1>
               <p class="unitPrice">1.50$</p>
               <button type ="button">Add to Cart</button>
            </div>


            <div class="product">
               <img src="images/eraser.jpg" class="Productimage">
               <h1 class="productName">Eraser</h1>
               <p class="unitPrice">2.00$</p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img  src="images/colouredPencil.jpg" class="Productimage">
               <h1 class="productName">Color Pencils</h1>
               <p class="unitPrice">7.50$ </p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img src="images/scissor.jpg" class="Productimage">
               <h1 class="productName">Scissors</h1>
               <p class="unitPrice">5.00$ </p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img width="350px" src="images/pencilcase.jpeg" class="Productimage">
               <h1 class="productName">Pencil Case</h1>
               <p class="unitPrice">10.00$ </p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img width="350px" src="images/binder.jpg" class="Productimage">
               <h1 class="productName">Binder</h1>
               <p class="unitPrice">8.50$ </p>
               <button type ="button">Add to Cart</button>
            </div>

            <div class="product">
               <img style="width: 350px" src="images/battery.jpg" class="Productimage">
               <h1 class="productName">Batteries</h1>
               <p class="unitPrice">15.00$ </p>
               <button type ="button">Add to Cart</button>

            </div>
            <h1 id="cart" class="cart">Shopping Cart</h1>
        </section>
    </main>
    <footer>
        <p>Copy right E-Shope @2024</p>
    </footer>
</body>
</html>
